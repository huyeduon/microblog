<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Microblog</title>
    <link rel="stylesheet" href="/static/css/styles.css" />
  </head>
  <body>
    <header class="navbar">
      <div class="navbar__brand">
        <img
          src="/static/logo.svg"
          alt="The Microblog logo"
          class="navbar__logo"
        />Microblog
      </div>
      <ul class="navbar__navigation">
        <li class="navbar__navigation-item">
          <a href="#" class="navbar__link">Recent</a>
        </li>
        <li class="navbar__navigation-item">
          <a href="#" class="navbar__link">Calendar</a>
        </li>
      </ul>
    </header>
    <main class="main">
      <!-- Add this section to display flash messages -->
      {% with messages = get_flashed_messages(with_categories=true) %} {% if
      messages %}
      <ul class="flash-messages">
        {% for category, message in messages %}
        <li class="flash-message flash-message--{{ category }}">
          {{ message }}
        </li>
        {% endfor %}
      </ul>
      {% endif %} {% endwith %}
      <section>
        <h1>Add new entry</h1>
        <form class="form" method="POST">
          <p class="form__input">
            <label for="entry" class="form__label">Entry contents</label>
            <textarea
              name="content"
              id="entry"
              class="form__textarea"
            ></textarea>
          </p>

          <button type="submit" class="form__submit">Add entry</button>
        </form>
      </section>
      <section>
        <h1>Recent posts</h1>
        {% for entry in entries %}
        <article class="entry">
          <div>
            <h2 class="entry__title">{{ entry[0] | truncate(30, true) }}</h2>
            <time class="entry__date" datetime="{{ entry[1] }}"
              >{{entry[2]}}</time
            >
          </div>

          <p class="entry__content">{{ entry[0]}}</p>
        </article>
        {% endfor %}
      </section>
    </main>
    <footer class="footer">
      <div class="footer__content">
        <section class="left">
          <a href="" class="footer__item">Made by Huyen Duong</a>
          <a href="" class="footer__item">Check out my other projects</a>
        </section>
        <section class="right">
          <div class="footer__column">
            <div class="footer__item">Recent</div>
            <div class="footer__item">Calendar</div>
          </div>
          <div class="footer__column">
            <div class="footer__item">About</div>
            <div class="footer__item">How this was made</div>
          </div>
        </section>
      </div>
    </footer>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const flashMessages = document.querySelectorAll(".flash-message");

        flashMessages.forEach((message) => {
          setTimeout(() => {
            message.style.opacity = "0";
            message.style.height = "0";
            message.style.padding = "0";
            message.style.margin = "0";
            message.style.border = "none";
            // Optional: Remove the element from the DOM after transition
            message.addEventListener("transitionend", () => message.remove());
          }, 1000); // Disappear after 3 seconds (3000 milliseconds)
        });
      });
    </script>
  </body>
</html>
